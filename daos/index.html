<!DOCTYPE html>

<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <title>Modularity with DAOs - Moor</title>
  <link rel="stylesheet" href="https://moor.simonbinder.eu/assets/css/just-the-docs.css">
  
  <script type="text/javascript" src="https://moor.simonbinder.eu/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="https://moor.simonbinder.eu/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="https://moor.simonbinder.eu/" class="site-title fs-6 lh-tight">Moor</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/" class="navigation-list-link">Home</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/getting-started/" class="navigation-list-link">Getting started</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/queries/" class="navigation-list-link">Writing queries</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://moor.simonbinder.eu/queries/custom" class="navigation-list-link">Custom queries</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="https://moor.simonbinder.eu/queries/joins" class="navigation-list-link">Table joins</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/transactions" class="navigation-list-link">Transactions</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/migrations/" class="navigation-list-link">Migrations</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="https://moor.simonbinder.eu/daos/" class="navigation-list-link active">Modularity with DAOs</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="https://moor.simonbinder.eu/faq/" class="navigation-list-link">Frequently asked questions</a>
            
          </li>
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Moor" aria-label="Search Moor" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
          <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
            <li><a href="https://pub.dartlang.org/packages/moor_flutter"><img src="https://img.shields.io/pub/v/moor_flutter.svg" /></a></li>
            <li><a href="https://github.com/simolus3/moor"><img src="https://img.shields.io/badge/repo-24292E.svg?logo=github&style=flat"></a></li>
          </ul> 
        </div>
      </div>
      <div class="main-content">
        
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 id="extracting-functionality-with-daos">Extracting functionality with DAOs</h1>
<p>When you have a lot of queries, putting them all into one class might become
tedious. You can avoid this by extracting some queries into classes that are 
available from your main database class. Consider the following code:</p>
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">part</span> <span class="s">'todos_dao.g.dart'</span><span class="o">;</span>

<span class="c1">// the _TodosDaoMixin will be created by moor. It contains all the necessary</span>
<span class="c1">// fields for the tables. The &lt;MyDatabase&gt; type annotation is the database class</span>
<span class="c1">// that should use this dao.</span>
<span class="nd">@UseDao</span><span class="o">(</span><span class="nl">tables:</span> <span class="o">[</span><span class="n">Todos</span><span class="o">])</span>
<span class="kd">class</span> <span class="nc">TodosDao</span> <span class="kd">extends</span> <span class="n">DatabaseAccessor</span><span class="o">&lt;</span><span class="n">MyDatabase</span><span class="o">&gt;</span> <span class="k">with</span> <span class="n">_$TodosDaoMixin</span> <span class="o">{</span>
  <span class="c1">// this constructor is required so that the main database can create an instance</span>
  <span class="c1">// of this object.</span>
  <span class="n">TodosDao</span><span class="o">(</span><span class="n">MyDatabase</span> <span class="n">db</span><span class="o">)</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="n">db</span><span class="o">);</span>

  <span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoEntry</span><span class="o">&gt;&gt;</span> <span class="n">todosInCategory</span><span class="o">(</span><span class="n">Category</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">category</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">select</span><span class="o">(</span><span class="n">todos</span><span class="o">)..</span><span class="na">where</span><span class="o">((</span><span class="n">t</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">isNull</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="na">category</span><span class="o">))).</span><span class="na">watch</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">select</span><span class="o">(</span><span class="n">todos</span><span class="o">)..</span><span class="na">where</span><span class="o">((</span><span class="n">t</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">t</span><span class="o">.</span><span class="na">category</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">category</span><span class="o">.</span><span class="na">id</span><span class="o">)))</span>
          <span class="o">.</span><span class="na">watch</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>If we now change the annotation on the <code class="highlighter-rouge">MyDatabase</code> class to <code class="highlighter-rouge">@UseMoor(tables: [Todos, Categories], daos: [TodosDao])</code>
and re-run the code generation, a generated getter <code class="highlighter-rouge">todosDao</code> can be used to access the instance of that dao.</p>


          

          <hr>
          <span class="fs-2">
              Was this page helpful? Please
              
              
              <a href="https://github.com/simolus3/moor/issues/new?body=Refers+to+the+documentation%3A+https%3A%2F%2Fmoor.simonbinder.eu%2Fdaos%2F">report an issue</a>
              if you have questions or run into problems.
          </span>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
